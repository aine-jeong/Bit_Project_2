/* 커뮤니티 게시판 첨부파일 */
CREATE TABLE COMMUNITY_ATTACHEDFILE (
	C_FILESIZE NUMBER NOT NULL, /* 파일 크기 */
	C_FILENAME NVARCHAR2(100) NOT NULL, /* 업로드 파일명 */
	C_REAL_FILENAME NVARCHAR2(100) NOT NULL, /* 실 파일명 */
	C_NUMBER NUMBER NOT NULL /* 글 번호 */
);
COMMENT ON TABLE COMMUNITY_ATTACHEDFILE IS '커뮤니티 게시판 첨부파일';
COMMENT ON COLUMN COMMUNITY_ATTACHEDFILE.C_FILESIZE IS '파일 크기';
COMMENT ON COLUMN COMMUNITY_ATTACHEDFILE.C_FILENAME IS '업로드 파일명';
COMMENT ON COLUMN COMMUNITY_ATTACHEDFILE.C_REAL_FILENAME IS '실 파일명';
COMMENT ON COLUMN COMMUNITY_ATTACHEDFILE.C_NUMBER IS '글 번호';
/* 회원테이블 */
CREATE TABLE Member (
	EMAIL NVARCHAR2(30) NOT NULL, /* 이메일 */
	PASSWORD NVARCHAR2(20) NOT NULL, /* 비밀번호 */
	CLASS NVARCHAR2(5), /* 회원구분 */
	NICKNAME NVARCHAR2(8) NOT NULL /* 닉네임 */
);
COMMENT ON TABLE Member IS '회원테이블';
COMMENT ON COLUMN Member.EMAIL IS '이메일';
COMMENT ON COLUMN Member.PASSWORD IS '비밀번호';
COMMENT ON COLUMN Member.CLASS IS '회원구분';
COMMENT ON COLUMN Member.NICKNAME IS '닉네임';
CREATE UNIQUE INDEX PK_Member
	ON Member (
		EMAIL ASC
	);
ALTER TABLE Member
	ADD
		CONSTRAINT PK_Member
		PRIMARY KEY (
			EMAIL
		);
/* Q&A 게시판 */
CREATE TABLE QNA_BOARD (
	QNA_NUMBER NUMBER NOT NULL, /* 질문 글 번호 */
	QNA_TITLE NVARCHAR2(100) NOT NULL, /* 질문 글 제목 */
	QNA_FILENAME NVARCHAR2(100), /* 파일명 */
	QNA_FILESIZE NUMBER, /* 파일 크기 */
	QNA_REAL_FILENAME NVARCHAR2(100), /* 실 파일명 */
	QNA_CONTENT NVARCHAR2(2000) NOT NULL, /* 글 내용 */
	QNA_WRITEDATE DATE DEFAULT SYSDATE NOT NULL, /* 작성일 */
	QNA_REFER NUMBER DEFAULT 1, /* 참조 글 번호(답글) */
	QNA_DEPTH NUMBER DEFAULT 1, /* 들여쓰기(답글) */
	QNA_STEP NUMBER DEFAULT 1, /* 글 순서(답글) */
	QNA_VIEWCOUNT NUMBER, /* 조회수 */
	EMAIL NVARCHAR2(30) NOT NULL /* 이메일 */
);
COMMENT ON TABLE QNA_BOARD IS 'Q&A 게시판';
COMMENT ON COLUMN QNA_BOARD.QNA_NUMBER IS '질문 글 번호';
COMMENT ON COLUMN QNA_BOARD.QNA_TITLE IS '질문 글 제목';
COMMENT ON COLUMN QNA_BOARD.QNA_FILENAME IS '파일명';
COMMENT ON COLUMN QNA_BOARD.QNA_FILESIZE IS '파일 크기';
COMMENT ON COLUMN QNA_BOARD.QNA_REAL_FILENAME IS '실 파일명';
COMMENT ON COLUMN QNA_BOARD.QNA_CONTENT IS '글 내용';
COMMENT ON COLUMN QNA_BOARD.QNA_WRITEDATE IS '작성일';
COMMENT ON COLUMN QNA_BOARD.QNA_REFER IS '참조 글 번호(답글)';
COMMENT ON COLUMN QNA_BOARD.QNA_DEPTH IS '들여쓰기(답글)';
COMMENT ON COLUMN QNA_BOARD.QNA_STEP IS '글 순서(답글)';
COMMENT ON COLUMN QNA_BOARD.QNA_VIEWCOUNT IS '조회수';
COMMENT ON COLUMN QNA_BOARD.EMAIL IS '이메일';
CREATE UNIQUE INDEX PK_QNA_BOARD
	ON QNA_BOARD (
		QNA_NUMBER ASC
	);
ALTER TABLE QNA_BOARD
	ADD
		CONSTRAINT PK_QNA_BOARD
		PRIMARY KEY (
			QNA_NUMBER
		);
/* 찜 목록 */
CREATE TABLE CARTLIST (
	CONTENT_ID NVARCHAR2(100) NOT NULL, /* 제주비짓 REST API에서 CONTENT_ID의 값 */
	EMAIL NVARCHAR2(30) NOT NULL /* 이메일 */
);
COMMENT ON TABLE CARTLIST IS '찜 목록';
COMMENT ON COLUMN CARTLIST.CONTENT_ID IS '제주비짓 REST API에서 CONTENT_ID의 값';
COMMENT ON COLUMN CARTLIST.EMAIL IS '이메일';
CREATE UNIQUE INDEX PK_CARTLIST
	ON CARTLIST (
		CONTENT_ID ASC,
		EMAIL ASC
	);
ALTER TABLE CARTLIST
	ADD
		CONSTRAINT PK_CARTLIST
		PRIMARY KEY (
			CONTENT_ID,
			EMAIL
		);
/* 커뮤니티 게시판 */
CREATE TABLE COMMUNITY_BOARD (
	C_NUMBER NUMBER NOT NULL, /* 글 번호 */
	C_TITLE NVARCHAR2(100) NOT NULL, /* 글 제목 */
	C_CONTENT NVARCHAR2(2000) NOT NULL, /* 글내용 */
	C_WRITEDATE DATE DEFAULT SYSDATE NOT NULL, /* 작성일 */
	C_FILENAME NVARCHAR2(200), /* 파일 이름 */
	C_REFER NUMBER DEFAULT 1, /* 참조 글 번호(답글) */
	C_DEPTH NUMBER DEFAULT 1, /* 들여쓰기(답글) */
	C_STEP NUMBER DEFAULT 1, /* 글 순서(답글) */
	C_VIEWCOUNT NUMBER, /* 조회수 */
	EMAIL NVARCHAR2(30) NOT NULL /* 이메일 */
);
COMMENT ON TABLE COMMUNITY_BOARD IS '커뮤니티 게시판';
COMMENT ON COLUMN COMMUNITY_BOARD.C_NUMBER IS '글 번호';
COMMENT ON COLUMN COMMUNITY_BOARD.C_TITLE IS '글 제목';
COMMENT ON COLUMN COMMUNITY_BOARD.C_CONTENT IS '글내용';
COMMENT ON COLUMN COMMUNITY_BOARD.C_WRITEDATE IS '작성일';
COMMENT ON COLUMN COMMUNITY_BOARD.C_FILENAME IS '파일 이름';
COMMENT ON COLUMN COMMUNITY_BOARD.C_REFER IS '참조 글 번호(답글)';
COMMENT ON COLUMN COMMUNITY_BOARD.C_DEPTH IS '들여쓰기(답글)';
COMMENT ON COLUMN COMMUNITY_BOARD.C_STEP IS '글 순서(답글)';
COMMENT ON COLUMN COMMUNITY_BOARD.C_VIEWCOUNT IS '조회수';
COMMENT ON COLUMN COMMUNITY_BOARD.EMAIL IS '이메일';
CREATE UNIQUE INDEX PK_COMMUNITY_BOARD
	ON COMMUNITY_BOARD (
		C_NUMBER ASC
	);
ALTER TABLE COMMUNITY_BOARD
	ADD
		CONSTRAINT PK_COMMUNITY_BOARD
		PRIMARY KEY (
			C_NUMBER
		);
/* 커뮤니티 게시판 댓글 */
CREATE TABLE COMMUNITY_REPLY_BOARD (
	CR_NUMBER NUMBER NOT NULL, /* 댓글 번호 */
	CR_CONTENT NVARCHAR2(2000) NOT NULL, /* 댓글 내용 */
	CR_WRITEDATE DATE DEFAULT SYSDATE NOT NULL, /* 작성일 */
	EMAIL NVARCHAR2(30), /* 이메일 */
	C_NUMBER NUMBER /* 글 번호 */
);
COMMENT ON TABLE COMMUNITY_REPLY_BOARD IS '커뮤니티 게시판 댓글';
COMMENT ON COLUMN COMMUNITY_REPLY_BOARD.CR_NUMBER IS '댓글 번호';
COMMENT ON COLUMN COMMUNITY_REPLY_BOARD.CR_CONTENT IS '댓글 내용';
COMMENT ON COLUMN COMMUNITY_REPLY_BOARD.CR_WRITEDATE IS '작성일';
COMMENT ON COLUMN COMMUNITY_REPLY_BOARD.EMAIL IS '이메일';
COMMENT ON COLUMN COMMUNITY_REPLY_BOARD.C_NUMBER IS '글 번호';
CREATE UNIQUE INDEX PK_COMMUNITY_REPLY_BOARD
	ON COMMUNITY_REPLY_BOARD (
		CR_NUMBER ASC
	);
ALTER TABLE COMMUNITY_REPLY_BOARD
	ADD
		CONSTRAINT PK_COMMUNITY_REPLY_BOARD
		PRIMARY KEY (
			CR_NUMBER
		);
/* 공지사항 게시판 */
CREATE TABLE NOTICE_BOARD (
	N_NUMBER NUMBER NOT NULL, /* 질문 글 번호 */
	N_TITLE NVARCHAR2(100) NOT NULL, /* 질문 글 제목 */
	N_FILENAME NVARCHAR2(100), /* 파일명 */
	N_FILESIZE NUMBER, /* 파일 크기 */
	N_REAL_FILENAME NVARCHAR2(100), /* 실 파일명 */
	N_VIEWCOUNT NUMBER, /* 조회수 */
	EMAIL NVARCHAR2(30) NOT NULL /* 이메일 */
);
COMMENT ON TABLE NOTICE_BOARD IS '공지사항 게시판';
COMMENT ON COLUMN NOTICE_BOARD.N_NUMBER IS '질문 글 번호';
COMMENT ON COLUMN NOTICE_BOARD.N_TITLE IS '질문 글 제목';
COMMENT ON COLUMN NOTICE_BOARD.N_FILENAME IS '파일명';
COMMENT ON COLUMN NOTICE_BOARD.N_FILESIZE IS '파일 크기';
COMMENT ON COLUMN NOTICE_BOARD.N_REAL_FILENAME IS '실 파일명';
COMMENT ON COLUMN NOTICE_BOARD.N_VIEWCOUNT IS '조회수';
COMMENT ON COLUMN NOTICE_BOARD.EMAIL IS '이메일';
CREATE UNIQUE INDEX PK_NOTICE_BOARD
	ON NOTICE_BOARD (
		N_NUMBER ASC
	);
ALTER TABLE NOTICE_BOARD
	ADD
		CONSTRAINT PK_NOTICE_BOARD
		PRIMARY KEY (
			N_NUMBER
		);
ALTER TABLE COMMUNITY_ATTACHEDFILE
	ADD
		CONSTRAINT FK_CMNT_BRD_TO_CMNT_ATCHDFL
		FOREIGN KEY (
			C_NUMBER
		)
		REFERENCES COMMUNITY_BOARD (
			C_NUMBER
		);
ALTER TABLE QNA_BOARD
	ADD
		CONSTRAINT FK_Member_TO_QNA_BOARD
		FOREIGN KEY (
			EMAIL
		)
		REFERENCES Member (
			EMAIL
		);
ALTER TABLE CARTLIST
	ADD
		CONSTRAINT FK_Member_TO_CARTLIST
		FOREIGN KEY (
			EMAIL
		)
		REFERENCES Member (
			EMAIL
		);
ALTER TABLE COMMUNITY_BOARD
	ADD
		CONSTRAINT FK_Member_TO_COMMUNITY_BOARD
		FOREIGN KEY (
			EMAIL
		)
		REFERENCES Member (
			EMAIL
		);
ALTER TABLE COMMUNITY_REPLY_BOARD
	ADD
		CONSTRAINT FK_Member_TO_CMNT_RPL_BRD
		FOREIGN KEY (
			EMAIL
		)
		REFERENCES Member (
			EMAIL
		);
ALTER TABLE COMMUNITY_REPLY_BOARD
	ADD
		CONSTRAINT FK_CMNT_BRD_TO_CMNT_RPL_BRD
		FOREIGN KEY (
			C_NUMBER
		)
		REFERENCES COMMUNITY_BOARD (
			C_NUMBER
		);
ALTER TABLE NOTICE_BOARD
	ADD
		CONSTRAINT FK_Member_TO_NOTICE_BOARD
		FOREIGN KEY (
			EMAIL
		)
		REFERENCES Member (
			EMAIL
		);